<!DOCTYPE html>
<html>
<head>
  <title>ASL Recognition</title>
</head>
<body style="display: flex; flex-direction: column; align-items: center; padding: 20px; font-family: sans-serif; background: #f0f0f0;">

  <h2 style="color: #333;">ASL Hand Sign Recognition</h2>
  <video id="webcam" width="64" height="64" autoplay style="border: 2px solid #333; margin: 10px; border-radius: 10px;"></video>
  <p style="font-size: 1.2em;">Prediction: <span id="prediction" style="font-weight: bold;">None</span></p>

  <script>
    const video = document.getElementById('webcam');
    const predictionSpan = document.getElementById('prediction');

    const canvas = document.createElement('canvas');
    canvas.width = 64; // MUST match model input shape
    canvas.height = 64;

    navigator.mediaDevices.getUserMedia({ video: true })
      .then(stream => {
        video.srcObject = stream;
      });

    function captureAndSend() {
      const ctx = canvas.getContext('2d');
      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

      canvas.toBlob(blob => {
        const formData = new FormData();
        formData.append('image', blob, 'frame.jpg');

        fetch('http://127.0.0.1:5000/predict', {
          method: 'POST',
          body: formData
        })
          .then(res => res.json())
          .then(data => {
            if (data.prediction) {
              predictionSpan.textContent = `${data.prediction} (${(data.confidence * 100).toFixed(1)}%)`;
            } else {
              predictionSpan.textContent = 'Error in prediction';
            }
          })
          .catch(err => {
            console.error('Fetch error:', err);
            predictionSpan.textContent = 'Fetch error';
          });
      }, 'image/jpeg');
    }

    setInterval(captureAndSend, 1000);  // every 1 second
  </script>
</body>
</html>
